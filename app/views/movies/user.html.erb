

<%= link_to all_movies_path(@user), class: "btn btn-primary" do %>
  <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
  </svg>
  Add Movies
<% end %>

<div id="user_movies">




<div class="container">
  <h2>Movies State</h2>
  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#home">Watched</a></li>
    <li><a data-toggle="tab" href="#menu1">Watching</a></li>
    <li><a data-toggle="tab" href="#menu2">To Watch</a></li>
  </ul>

  <div class="tab-content">
    <div id="home" class="tab-pane fade in active">
      <h1>Watched Movies</h1>
<div class="user_movie_relationship_movies container d-flex justify-content-center mt-5 pt-5">
  <div class="row ">
    <% @watched_movies.each do |movie| %>
      <div class="col-lg col-sm-8 col-md-3 m-auto">
        <div class="card border-0 shadow">
        <%= image_tag 'movie_logo.jpg', alt: 'Food Logo', class: "card-img-top" %>
        <div class="card-body">
            <h5 class="card-title"><%= movie.name %></h5>
            <h7 class="card-title"><%= movie.director %></h7>
            <p>Rating: <span id="rating_<%= movie.id %>"><%= @user.movie_rating(movie)||"-" %></span>
               <a href="#" class="modify-rating" data-movie-id="<%= movie.id %>">Modify</a>
            </p>
            <%= form_with(url: change_notes_user_movie_path(@user,movie),method: :patch, remote: true) do |f| %>
               <%= f.text_field :rating, id: "rating_input_#{movie.id}", style: "display:none;" %>
               <%= f.submit "Save", class:"btn btn-primary", id: "save_rating_#{movie.id}", style: "display:none;" %>
            <% end %>
            <p>Notes: <%= @user.movie_notes(movie)||"-" %></p>
           
           

            <div class="dropdown">
              <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">
                Add
              </button>
              <ul class="dropdown-menu">
                <li><a>
                  <%= form_tag(watching_user_movie_path(@user, movie), method: :post,remote: true) do %>
                  <%= submit_tag "Watching List", class: "btn-link btn-primary" %>
                  <% end %>
                </a></li>
                <li><a>
                  <%= form_tag(to_watch_user_movie_path(@user, movie), method: :post, remote: true) do %>
                  <%= submit_tag "To_watch List", class: "btn-link btn-primary" %>
                  <% end %>
                </a></li>
              </ul>
            </div>


        </div>
        </div>
        </div>
     <% end %>
    </div>
</div>
</div>
    <div id="menu1" class="tab-pane fade">
      <h1>Watching Movies</h1>
<div class="user_movie_relationship_movies">
  <div class="row">
    <% @watching_movies.each do |movie| %>
      <div class="col-lg col-sm-8 col-md-3 m-auto">
        <div class="card border-0 shadow">
        <%= image_tag 'movie_logo.jpg', alt: 'Food Logo', class: "card-img-top" %>
        <div class="card-body">
            <h5 class="card-title"><%= movie.name %></h5>
            <h7 class="card-title"><%= movie.director %></h7>
            <p>Notes: <%= @user.movie_notes(movie)||"-" %></p>

             
            

            <div class="dropdown">
              <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">
                Add
              </button>
              <ul class="dropdown-menu">
                <li><a>
                  <%= form_tag(watched_user_movie_path(@user, movie), method: :post, remote: true ) do %>
                  <%= submit_tag "Watched List", class: "btn-link btn-primary" %>
                  <% end %>
                </a></li>
                <li><a>
                  <%= form_tag(to_watch_user_movie_path(@user, movie), method: :post, remote: true) do %>
                  <%= submit_tag "To_watch List", class: "btn-link btn-primary" %>
                  <% end %>
                </a></li>
              </ul>
            </div>

        </div>
        </div>
      </div>
    <% end %>
  </div>
</div>  
</div>
    <div id="menu2" class="tab-pane fade">
      <h1>To_watch Movies</h1>
<div class="user_movie_relationship_movies">
  <div class="row">
    <% @to_watch_movies.each do |movie| %>
      <div class="col-lg col-sm-8 col-md-3 m-auto">
        <div class="card border-0 shadow">
        <%= image_tag 'movie_logo.jpg', alt: 'Food Logo', class: "card-img-top" %>
        <div class="card-body">
            <h5 class="card-title"><%= movie.name %></h5>
            <h7 class="card-title"><%= movie.director %></h7>
            <p>Notes: <%= @user.movie_notes(movie)||"-" %></p>
            
            

            <div class="dropdown">
              <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">
                Add
              </button>
              <ul class="dropdown-menu">
                <li><a>
                  <%= form_tag(watched_user_movie_path(@user, movie), method: :post, remote: true) do %>
                  <%= submit_tag "Watched List", class: "btn-link btn-primary" %>
                  <% end %>
                </a></li>
                <li><a>
                  <%= form_tag(watching_user_movie_path(@user, movie), method: :post, remote: true) do %>
                  <%= submit_tag "Watching List", class: "btn-link btn-primary" %>
                  <% end %>
                </a></li>
              </ul>
            </div>


            
        </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
 </div>
  </div>
</div>



<%= javascript_include_tag 'my_js' %>

</div>
